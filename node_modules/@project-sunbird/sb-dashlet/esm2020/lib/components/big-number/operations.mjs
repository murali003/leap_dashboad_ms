import { sumBy, toNumber, minBy, maxBy } from 'lodash-es';
const iterateeFn = key => row => toNumber(row[key]);
const SUM = data => key => sumBy(data, iterateeFn(key));
const MIN = data => key => minBy(data, iterateeFn(key))[key];
const MAX = data => key => maxBy(data, iterateeFn(key))[key];
const AVG = data => key => {
    const length = data.length || 0;
    if (length === 0)
        return 0;
    const totalSum = SUM(data)(key);
    return (totalSum / length).toFixed(2);
};
const $operations = new Map([
    ['SUM', SUM],
    ['MIN', MIN],
    ['MAX', MAX],
    ['AVG', AVG]
]);
export const runAggregator = (aggregateFn, data, key) => {
    const aggregateFnUpper = aggregateFn.toUpperCase();
    if ($operations.has(aggregateFnUpper)) {
        return $operations.get(aggregateFnUpper)(data)(key);
    }
    throw new Error('Specified Aggregator function does not exists');
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlcmF0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NiLWRhc2hsZXRzL3NyYy9saWIvY29tcG9uZW50cy9iaWctbnVtYmVyL29wZXJhdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQUV6RCxNQUFNLFVBQVUsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBRXBELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBRXhELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRTdELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRTdELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUU7SUFDeEIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7SUFDaEMsSUFBSSxNQUFNLEtBQUssQ0FBQztRQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzNCLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoQyxPQUFPLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QyxDQUFDLENBQUE7QUFFRCxNQUFNLFdBQVcsR0FBRyxJQUFJLEdBQUcsQ0FBQztJQUMxQixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUM7SUFDWixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUM7SUFDWixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUM7SUFDWixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUM7Q0FDYixDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxXQUFtQixFQUFFLElBQWMsRUFBRSxHQUFXLEVBQUUsRUFBRTtJQUNoRixNQUFNLGdCQUFnQixHQUFHLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNuRCxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtRQUNyQyxPQUFPLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNyRDtJQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsK0NBQStDLENBQUMsQ0FBQztBQUNuRSxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdW1CeSwgdG9OdW1iZXIsIG1pbkJ5LCBtYXhCeSB9IGZyb20gJ2xvZGFzaC1lcydcblxuY29uc3QgaXRlcmF0ZWVGbiA9IGtleSA9PiByb3cgPT4gdG9OdW1iZXIocm93W2tleV0pO1xuXG5jb25zdCBTVU0gPSBkYXRhID0+IGtleSA9PiBzdW1CeShkYXRhLCBpdGVyYXRlZUZuKGtleSkpO1xuXG5jb25zdCBNSU4gPSBkYXRhID0+IGtleSA9PiBtaW5CeShkYXRhLCBpdGVyYXRlZUZuKGtleSkpW2tleV07XG5cbmNvbnN0IE1BWCA9IGRhdGEgPT4ga2V5ID0+IG1heEJ5KGRhdGEsIGl0ZXJhdGVlRm4oa2V5KSlba2V5XTtcblxuY29uc3QgQVZHID0gZGF0YSA9PiBrZXkgPT4ge1xuICBjb25zdCBsZW5ndGggPSBkYXRhLmxlbmd0aCB8fCAwO1xuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gMDtcbiAgY29uc3QgdG90YWxTdW0gPSBTVU0oZGF0YSkoa2V5KTtcbiAgcmV0dXJuICh0b3RhbFN1bSAvIGxlbmd0aCkudG9GaXhlZCgyKTtcbn1cblxuY29uc3QgJG9wZXJhdGlvbnMgPSBuZXcgTWFwKFtcbiAgWydTVU0nLCBTVU1dLFxuICBbJ01JTicsIE1JTl0sXG4gIFsnTUFYJywgTUFYXSxcbiAgWydBVkcnLCBBVkddXG5dKTtcblxuZXhwb3J0IGNvbnN0IHJ1bkFnZ3JlZ2F0b3IgPSAoYWdncmVnYXRlRm46IHN0cmluZywgZGF0YTogb2JqZWN0W10sIGtleTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGFnZ3JlZ2F0ZUZuVXBwZXIgPSBhZ2dyZWdhdGVGbi50b1VwcGVyQ2FzZSgpO1xuICBpZiAoJG9wZXJhdGlvbnMuaGFzKGFnZ3JlZ2F0ZUZuVXBwZXIpKSB7XG4gICAgcmV0dXJuICRvcGVyYXRpb25zLmdldChhZ2dyZWdhdGVGblVwcGVyKShkYXRhKShrZXkpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignU3BlY2lmaWVkIEFnZ3JlZ2F0b3IgZnVuY3Rpb24gZG9lcyBub3QgZXhpc3RzJyk7XG59XG4iXX0=